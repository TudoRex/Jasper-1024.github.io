<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Android,Android Studio,学习记录," />





  <link rel="alternate" href="/atom.xml" title="默" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.5.0" />






<meta name="description" content="本节内容来自以下内容整合。

http://www.cnblogs.com/noTice520/archive/2011/12/05/2276379.html
第一行代码

* ListView被很多人称为最常用也是最难用的控件。于此抽出一节来详细说明补充第一行代码内容。
正文开始
ListView说明
ListView通常有两个职责。

将数据填充到布局。

处理用户的选择点击等操作。



L">
<meta property="og:type" content="article">
<meta property="og:title" content="第一行代码AS跟刷-UI(三)ListView">
<meta property="og:url" content="http://yoursite.com/2016/08/11/第一行代码AS跟刷-UI(三)ListView/index.html">
<meta property="og:site_name" content="默">
<meta property="og:description" content="本节内容来自以下内容整合。

http://www.cnblogs.com/noTice520/archive/2011/12/05/2276379.html
第一行代码

* ListView被很多人称为最常用也是最难用的控件。于此抽出一节来详细说明补充第一行代码内容。
正文开始
ListView说明
ListView通常有两个职责。

将数据填充到布局。

处理用户的选择点击等操作。



L">
<meta property="og:image" content="http://cdn2.snapgram.co/imgs/2016/08/12/ScreenShot_20160812164439.png">
<meta property="og:image" content="http://cdn3.snapgram.co/imgs/2016/08/12/Screenshot_20160812-170816.png">
<meta property="og:image" content="http://cdn3.snapgram.co/imgs/2016/08/12/Screenshot_20160812-175707.png">
<meta property="og:image" content="http://cdn4.snapgram.co/images/2016/08/12/Screenshot_20160812-180839.png">
<meta property="og:image" content="http://cdn5.snapgram.co/images/2016/08/12/Screenshot_20160812-205336.png">
<meta property="og:updated_time" content="2016-09-03T02:23:31.758Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="第一行代码AS跟刷-UI(三)ListView">
<meta name="twitter:description" content="本节内容来自以下内容整合。

http://www.cnblogs.com/noTice520/archive/2011/12/05/2276379.html
第一行代码

* ListView被很多人称为最常用也是最难用的控件。于此抽出一节来详细说明补充第一行代码内容。
正文开始
ListView说明
ListView通常有两个职责。

将数据填充到布局。

处理用户的选择点击等操作。



L">
<meta name="twitter:image" content="http://cdn2.snapgram.co/imgs/2016/08/12/ScreenShot_20160812164439.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"right","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> 第一行代码AS跟刷-UI(三)ListView | 默 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-79641673-1', 'auto');
  ga('send', 'pageview');
</script>









  
  
    
  

  <div class="container one-collumn sidebar-position-right page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">默</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">为了生存，而一点点淡忘了最初的本意。</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-guestbook">
          <a href="/guestbook" rel="section">
            
              <i class="menu-item-icon fa fa-question-circle fa-fw"></i> <br />
            
            留言
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                第一行代码AS跟刷-UI(三)ListView
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-11T19:00:00+08:00" content="2016-08-11">
              2016-08-11
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/第一行代码/" itemprop="url" rel="index">
                    <span itemprop="name">第一行代码</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/11/第一行代码AS跟刷-UI(三)ListView/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/11/第一行代码AS跟刷-UI(三)ListView/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/08/11/第一行代码AS跟刷-UI(三)ListView/" class="leancloud_visitors" data-flag-title="第一行代码AS跟刷-UI(三)ListView">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>本节内容来自以下内容整合。</p>
<blockquote>
<p><a href="http://www.cnblogs.com/noTice520/archive/2011/12/05/2276379.html" target="_blank" rel="external">http://www.cnblogs.com/noTice520/archive/2011/12/05/2276379.html</a></p>
<p>第一行代码</p>
</blockquote>
<h2 id="ListView被很多人称为最常用也是最难用的控件。于此抽出一节来详细说明补充第一行代码内容。"><a href="#ListView被很多人称为最常用也是最难用的控件。于此抽出一节来详细说明补充第一行代码内容。" class="headerlink" title="* ListView被很多人称为最常用也是最难用的控件。于此抽出一节来详细说明补充第一行代码内容。"></a>* ListView被很多人称为最常用也是最难用的控件。于此抽出一节来详细说明补充第一行代码内容。</h2><ul>
<li><p>正文开始</p>
<h2 id="ListView说明"><a href="#ListView说明" class="headerlink" title="ListView说明"></a>ListView说明</h2></li>
<li><p>ListView通常有两个职责。</p>
<ul>
<li><p>将数据填充到布局。</p>
</li>
<li><p>处理用户的选择点击等操作。</p>
</li>
</ul>
</li>
<li><p>ListView的创建需要3个元素。</p>
<ul>
<li><p>ListView中的每一列的View。</p>
</li>
<li><p>填入View的数据或者图片等。</p>
</li>
<li><p>连接数据与ListView的适配器。</p>
</li>
</ul>
</li>
<li><p>适配器，参考资料种博主给的定义如下：<br>  适配器是一个连接数据和AdapterView（ListView就是一个典型的AdapterView）的桥梁，通过它能有效地实现数据与AdapterView的分离设置，使AdapterView与数据的绑定更加简便，修改更加方便。常用适配器类型如下。<br><img src="http://cdn2.snapgram.co/imgs/2016/08/12/ScreenShot_20160812164439.png" alt="ScreenShot_20160812164439.png"></p>
</li>
</ul>
<h3 id="适配器运行效果"><a href="#适配器运行效果" class="headerlink" title="适配器运行效果"></a>适配器运行效果</h3><ul>
<li>在main-activity.XML中添加ListView.<br>  代码如下  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">ListView</span></span><br><span class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/list_view"</span></span><br><span class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span><br><span class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ListView</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>MainActivity中初始化<br>  以ArrayAdapter为例，代码如下</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//要显示的数组，屏幕长了点，为了显示滑动效果多增加了几项。</span></span><br><span class="line"> <span class="keyword">private</span> String[] data = &#123;<span class="string">"apple"</span>,<span class="string">"banana"</span>,<span class="string">"orange"</span>,<span class="string">"watermelon"</span>,<span class="string">"pear"</span>,<span class="string">"grape"</span>,<span class="string">"pineapple"</span>,<span class="string">"strawberry"</span>,<span class="string">"cherry"</span>,<span class="string">"mango"</span>,<span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>,<span class="string">"D"</span>,<span class="string">"E"</span>,<span class="string">"F"</span>&#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">      setContentView(R.layout.activity_main);</span><br><span class="line">      Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);</span><br><span class="line">      setSupportActionBar(toolbar);</span><br><span class="line">      </span><br><span class="line"><span class="comment">//为适配器绑定数据</span></span><br><span class="line">	ArrayAdapter&lt;String&gt; adapter = <span class="keyword">new</span> ArrayAdapter&lt;String&gt;(MainActivity.<span class="keyword">this</span>,android.R.layout.simple_list_item_single_choice,data);</span><br><span class="line"><span class="comment">//得到ListView对象的引用</span></span><br><span class="line">ListView listView = (ListView) findViewById(R.id.list_view);</span><br><span class="line"><span class="comment">//适配器内容传递</span></span><br><span class="line">listView.setAdapter(adapter);</span><br><span class="line">    </span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>显示效果如下图<br>  <img src="http://cdn3.snapgram.co/imgs/2016/08/12/Screenshot_20160812-170816.png" alt="Screenshot_20160812-170816.png"></p>
</li>
</ul>
<h4 id="ArrayAdapter"><a href="#ArrayAdapter" class="headerlink" title="ArrayAdapter"></a>ArrayAdapter</h4><ul>
<li>基础的显示效果如上图所示</li>
<li><p>实现的步骤。</p>
<ul>
<li><p>定义一个数组来存放item的内容。</p>
</li>
<li><p>通过实现ArrayAdapter的构造函数来创建一个ArrayAdapter的对象。</p>
</li>
<li><p>通过ListView的setAdapter()方法绑定ArrayAdapter。</p>
<p>参考资料中特别提到第二步。<br>ArrayAdapter有多个构造函数，例程是的一种。</p>
</li>
<li>第一个参数为上下文，</li>
<li>第二个参数为一个包含TextView，用来填充ListView的每一行的布局资源ID。</li>
<li>第三个参数为ListView的内容。<br>其中  <strong>第二个参数可以使用自定义layout</strong>，但是<strong>layout必须要有TextView控件</strong>。通常使用Android提供的资源，还包括带RadioButton和CheckBox的ListView。</li>
</ul>
</li>
<li><p>带带选择框  ListView使用</p>
<ul>
<li>指定android.R.layout.simple_list_item_checked这个资源，可以实现带选择框的ListView。必须使用setChoiceMode()方法设定选择为多选还是单选，否则选择效果无效。</li>
<li><p>部分代码如下</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line"><span class="comment">//指定simple_list_item_checked</span></span><br><span class="line">	ArrayAdapter&lt;String&gt; adapter = <span class="keyword">new</span> ArrayAdapter&lt;String&gt;(MainActivity.<span class="keyword">this</span>,android.R.layout.simple_list_item_checked,data);</span><br><span class="line">ListView listView = (ListView) findViewById(R.id.list_view);</span><br><span class="line">listView.setAdapter(adapter);</span><br><span class="line"><span class="comment">//设置多选</span></span><br><span class="line">	listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);</span><br></pre></td></tr></table></figure>
</li>
<li><p>效果如下图所示<br><img src="http://cdn3.snapgram.co/imgs/2016/08/12/Screenshot_20160812-175707.png" alt="Screenshot_20160812-175707.png"></p>
</li>
</ul>
</li>
<li><p>带CheckBox  ListView使用</p>
<ul>
<li>与带选择框的ListView应用基本相同<br>  android.R.layout.simple_list_item_multiple_choice这个资源，使用setChoiceMode()设置单选/多选。</li>
<li><p>部分代码如下</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> ArrayAdapter&lt;String&gt; adapter = <span class="keyword">new</span> ArrayAdapter&lt;String&gt;(MainActivity.<span class="keyword">this</span>,android.R.layout.simple_list_item_multiple_choice,data);</span><br><span class="line">ListView listView = (ListView) findViewById(R.id.list_view);</span><br><span class="line">listView.setAdapter(adapter);</span><br><span class="line"></span><br><span class="line">listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);</span><br></pre></td></tr></table></figure>
</li>
<li><p>效果如下图<br>  <img src="http://cdn4.snapgram.co/images/2016/08/12/Screenshot_20160812-180839.png" alt="Screenshot_20160812-180839.png"></p>
</li>
</ul>
</li>
<li><p>带RadioButton的ListView</p>
<ul>
<li>基本同上，不加累赘。</li>
<li><p>代码如下</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ArrayAdapter&lt;String&gt; adapter = <span class="keyword">new</span> ArrayAdapter&lt;String&gt;(MainActivity.<span class="keyword">this</span>,android.R.layout.simple_list_item_single_choice,data);</span><br><span class="line">ListView listView = (ListView) findViewById(R.id.list_view);</span><br><span class="line">listView.setAdapter(adapter);</span><br><span class="line">listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);</span><br></pre></td></tr></table></figure>
</li>
<li><p>效果如下图<br>  <img src="http://cdn5.snapgram.co/images/2016/08/12/Screenshot_20160812-205336.png" alt="Screenshot_20160812-205336.png"></p>
</li>
</ul>
</li>
</ul>
<h4 id="响应点击事件"><a href="#响应点击事件" class="headerlink" title="响应点击事件"></a>响应点击事件</h4><ul>
<li>使用AdapterView.OnItemClickListener注册一个监听器。点击任何ListView的子项后，回掉onItemClick()；</li>
</ul>
<ul>
<li><p>onItemClick函数说明<br>  官方文档</p>
<blockquote>
<p><a href="https://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html" target="_blank" rel="external">https://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html</a></p>
</blockquote>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">void onItemClick (AdapterView&lt;?&gt; parent, //点击子项所属ListView的指针</span><br><span class="line">View view, //所点击view的句柄</span><br><span class="line">int position, //所点击子项在listview中位置</span><br><span class="line">long id)//子项的ID 一般情况下与position一致</span><br></pre></td></tr></table></figure>
</li>
<li><p>代码如下</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">listView.setOnItemClickListener(<span class="keyword">new</span> AdapterView.OnItemClickListener() &#123;</span><br><span class="line"></span><br><span class="line">       <span class="meta">@Override</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onItemClick</span><span class="params">(AdapterView&lt;?&gt; arg0, View arg1, <span class="keyword">int</span> arg2,<span class="keyword">long</span> arg3)</span> </span>&#123;</span><br><span class="line">          </span><br><span class="line">          <span class="comment">//点击后在标题上显示点击了第几行</span></span><br><span class="line">           setTitle(<span class="string">"你点击了第"</span>+arg2+<span class="string">"行"</span>);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>注意一点区别<strong>AdapterView.OnItemClickListener()这一项在第一行代码中为OnItemClickListener()</strong>       </li>
</ul>
</li>
</ul>
<h3 id="SimpleAdapter"><a href="#SimpleAdapter" class="headerlink" title="SimpleAdapter"></a>SimpleAdapter</h3><ul>
<li>SimpleAdapter可以绑定xml布局到ListView中，具体步骤如下。<br><strong>(xml中绑定button不提示出错，但是点击操作被ListView的Item所覆盖，无法使用！)</strong><ul>
<li>根据需要定义ListView每行所实现的布局。</li>
<li>定义一个HashMap构成的列表，将数据以键值对的方式存放在里面。</li>
<li>构造SimpleAdapter对象。</li>
<li>将LsitView绑定到SimpleAdapter上。<br>  以实例来说明。</li>
</ul>
</li>
<li><p>首先新建一个名为item.xml的RelativeLayout布局文件。两个TextView和1个ImageView构成。</p>
<ul>
<li>代码如下：<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">   &lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">   <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span><br><span class="line">   <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">ImageView</span></span><br><span class="line">       <span class="attr">android:layout_alignParentRight</span>=<span class="string">"true"</span></span><br><span class="line">       <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span><br><span class="line">       <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span><br><span class="line">       <span class="attr">android:id</span>=<span class="string">"@+id/ItemImage"</span></span><br><span class="line">       /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">TextView</span></span><br><span class="line">       <span class="attr">android:id</span>=<span class="string">"@+id/ItemTitle"</span></span><br><span class="line">       <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span><br><span class="line">       <span class="attr">android:layout_width</span>=<span class="string">"fill_parent"</span></span><br><span class="line">       <span class="attr">android:textSize</span>=<span class="string">"20sp"</span></span><br><span class="line">       /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">TextView</span></span><br><span class="line">       <span class="attr">android:id</span>=<span class="string">"@+id/ItemText"</span></span><br><span class="line">       <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span><br><span class="line">       <span class="attr">android:layout_width</span>=<span class="string">"fill_parent"</span></span><br><span class="line">       <span class="attr">android:layout_below</span>=<span class="string">"@+id/ItemTitle"</span></span><br><span class="line">       /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>在代码中为ListView绑定数据<br>  代码如下</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">       setContentView(R.layout.activity_my_list_view);</span><br><span class="line">       Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);</span><br><span class="line">       setSupportActionBar(toolbar);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       lv = (ListView) findViewById(R.id.lv);</span><br><span class="line"><span class="comment">//定义一个动态数组</span></span><br><span class="line">       ArrayList&lt;HashMap&lt;String, Object&gt;&gt; listItem = <span class="keyword">new</span>	 ArrayList&lt;HashMap&lt;String,     Object&gt;&gt;();</span><br><span class="line"><span class="comment">//在数组中存放数据</span></span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">       &#123;</span><br><span class="line">           HashMap&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line">           map.put(<span class="string">"ItemImage"</span>, R.drawable.apple_pic);<span class="comment">//加入图片</span></span><br><span class="line">           map.put(<span class="string">"ItemTitle"</span>, <span class="string">"第"</span>+i+<span class="string">"行"</span>);</span><br><span class="line">           map.put(<span class="string">"ItemText"</span>, <span class="string">"这是第"</span>+i+<span class="string">"行"</span>);</span><br><span class="line">           listItem.add(map);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       SimpleAdapter mSimpleAdapter = <span class="keyword">new</span> SimpleAdapter(<span class="keyword">this</span>,listItem,<span class="comment">//需要绑定的数据</span></span><br><span class="line">               R.layout.item,<span class="comment">//每一行的布局</span></span><br><span class="line"><span class="comment">//动态数组中的数据源的键对应到定义布局的View中</span></span><br><span class="line">               <span class="keyword">new</span> String[] &#123;<span class="string">"ItemImage"</span>,<span class="string">"ItemTitle"</span>, <span class="string">"ItemText"</span>&#125;,</span><br><span class="line">               <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;R.id.ItemImage,R.id.ItemTitle,R.id.ItemText&#125;</span><br><span class="line">       );</span><br><span class="line"></span><br><span class="line">       lv.setAdapter(mSimpleAdapter);<span class="comment">//为ListView绑定适配器</span></span><br><span class="line"></span><br><span class="line">       lv.setOnItemClickListener(<span class="keyword">new</span> AdapterView.OnItemClickListener() &#123;</span><br><span class="line"></span><br><span class="line">       <span class="meta">@Override</span></span><br><span class="line">         <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onItemClick</span><span class="params">(AdapterView&lt;?&gt; arg0, View arg1, <span class="keyword">int</span> arg2, <span class="keyword">long</span> arg3)</span> </span>&#123;</span><br><span class="line">          setTitle(<span class="string">"你点击了第"</span>+arg2+<span class="string">"行"</span>);<span class="comment">//设置标题栏显示点击的行</span></span><br><span class="line"></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>函数说明<br>  SimpleAdapter mSimpleAdapter = new SimpleAdapter(this,listItem,R.layout.item,<br>   new String[] {“ItemImage”,”ItemTitle”, “ItemText”},<br>   new int[] {R.id.ItemImage,R.id.ItemTitle,R.id.ItemText}</p>
<pre><code>);
</code></pre></li>
<li><p>函数原型：<br>  SimpleAdapter (Context context, </p>
<pre><code>List&lt;? extends Map&lt;String, ?&gt;&gt; data, 
int resource, 
String[] from, 
int[] to)
</code></pre><ul>
<li><p>Context context : </p>
<ul>
<li>The context where the View associated with this SimpleAdapter is running   </li>
<li>关联SimpleAdapter运行的视图上下文</li>
</ul>
</li>
<li><p>List&lt;? extends Map<string, ?="">&gt; data</string,></p>
<ul>
<li>A List of Maps. Each entry in the List corresponds to one row in the list. The Maps contain the data for each row, and should include all the entries specified in “from”</li>
<li>Map列表，列表要显示的数据，这部分需要自己实现，如例子中的getData()，类型要与上面的一致，每条项目要与from中指定条目一致</li>
</ul>
</li>
<li><p>int resource        </p>
<ul>
<li>Resource identifier of a view layout that defines the views for this list item. The layout file should include at least those named views defined in “to”</li>
<li>resource：ListView单项布局文件的Id,这个布局就是你自定义的布局了，你想显示什么样子的布局都在这个布局中。这个布局中必须包括了to中定义的控件id</li>
</ul>
</li>
<li>String[] from<ul>
<li>String: A list of column names that will be added to the Map associated with each item.</li>
<li>一个被添加到Map上关联每一个项目列名称的列表，数组里面是列名称</li>
</ul>
</li>
<li>int[] to<ul>
<li>The views that should display column in the “from” parameter. </li>
<li>是一个int数组，数组里面的id是自定义布局中各个控件的id，需要与上面的from对应。</li>
</ul>
</li>
</ul>
</li>
<li><p>详细说明<br>  SimpleAdapter mSimpleAdapter = new SimpleAdapter(this,listItem,R.layout.item,<br>   new String[] {“ItemImage”,”ItemTitle”, “ItemText”},<br>   new int[] {R.id.ItemImage,R.id.ItemTitle,R.id.ItemText}</p>
<pre><code>);    
</code></pre><ul>
<li>this：关联的上下文</li>
<li>listItem：Map列表</li>
<li>R.layout.item：xml布局Id</li>
<li>new String[] {“ItemImage”,”ItemTitle”, “ItemText”},<br>new int[] {R.id.ItemImage,R.id.ItemTitle,R.id.ItemText：互相对应</li>
</ul>
</li>
<li><p>BaseAdapter<br>  内容还在眩晕中，回头补上。。。     </p>
</li>
</ul>

      
    </div>

    <div>
      
        
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Android/" rel="tag">#Android</a>
          
            <a href="/tags/Android-Studio/" rel="tag">#Android Studio</a>
          
            <a href="/tags/学习记录/" rel="tag">#学习记录</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/08/10/第一行代码AS跟刷-UI(二)/" rel="next" title="第一行代码AS跟刷-UI(二)">
                <i class="fa fa-chevron-left"></i> 第一行代码AS跟刷-UI(二)
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/09/03/第一行代码AS跟刷-Broadcast广播/" rel="prev" title="第一行代码AS跟刷-Broadcast广播">
                第一行代码AS跟刷-Broadcast广播 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/v.png"
               alt="Jasper" />
          <p class="site-author-name" itemprop="name">Jasper</p>
          <p class="site-description motion-element" itemprop="description">程序员 微尘 V</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">19</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/jasper-1024" target="_blank">
                  
                    <i class="fa fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        <div class="links-of-blogroll motion-element">
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#ListView被很多人称为最常用也是最难用的控件。于此抽出一节来详细说明补充第一行代码内容。"><span class="nav-number">1.</span> <span class="nav-text">* ListView被很多人称为最常用也是最难用的控件。于此抽出一节来详细说明补充第一行代码内容。</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ListView说明"><span class="nav-number">2.</span> <span class="nav-text">ListView说明</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#适配器运行效果"><span class="nav-number">2.1.</span> <span class="nav-text">适配器运行效果</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ArrayAdapter"><span class="nav-number">2.1.1.</span> <span class="nav-text">ArrayAdapter</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#响应点击事件"><span class="nav-number">2.1.2.</span> <span class="nav-text">响应点击事件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SimpleAdapter"><span class="nav-number">2.2.</span> <span class="nav-text">SimpleAdapter</span></a></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016.6.2 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jasper</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  


  




<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=0.5.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=0.5.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'jasper1024';
      var disqus_identifier = '2016/08/11/第一行代码AS跟刷-UI(三)ListView/';
      var disqus_title = '第一行代码AS跟刷-UI(三)ListView';
      var disqus_url = 'http://yoursite.com/2016/08/11/第一行代码AS跟刷-UI(三)ListView/';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
        run_disqus_script('embed.js');
      
    </script>
  



  
  
  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("8AEPwU1rVoSnwxtOrX35u23j-gzGzoHsz", "SBLr7EMdL83IXCfJSbydMdll");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

</body>
</html>
